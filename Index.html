<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador Interactivo: Pruebas de la Evoluci√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f4e8; /* Papyrus White */
            color: #334155; /* Slate Gray */
        }
        .nav-card, .sub-nav-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .nav-card:hover, .sub-nav-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .nav-card.active, .nav-card.current-section-active {
            transform: translateY(-2px);
            box-shadow: 0 0 0 3px #14B8A6; /* Muted Teal */
            border-color: #14B8A6;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container { 
            position: relative;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
            max-width: 900px; 
        }
        .quiz-option {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .quiz-option:hover {
            background-color: #f0f9ff;
        }
        .quiz-option.selected {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .quiz-option.correct {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        .original-text-content h1 { font-size: 1.875rem; font-weight: bold; margin-bottom: 1rem; color: #1e293b; }
        .original-text-content h2 { font-size: 1.5rem; font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.75rem; color: #334155; }
        .original-text-content h3 { font-size: 1.25rem; font-weight: bold; margin-top: 1rem; margin-bottom: 0.5rem; color: #475569; }
        .original-text-content p { margin-bottom: 1rem; line-height: 1.6; } 
        .original-text-content ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .original-text-content li { margin-bottom: 0.25rem; }
        .analysis-card {
            background-color: #f0f9ff; /* Light blue */
            border-left: 4px solid #0ea5e9; /* Sky blue */
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px 0 rgba(0,0,0,0.06);
            cursor: pointer;
        }
         .analysis-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12">
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-800">Pruebas de la Evoluci√≥n Biol√≥gica</h1>
            <p class="mt-3 sm:mt-4 text-md sm:text-lg text-slate-600 max-w-3xl mx-auto">Una exploraci√≥n interactiva de las evidencias que sustentan la teor√≠a de la evoluci√≥n. Selecciona una categor√≠a para aprender m√°s o prueba tus conocimientos.</p>
        </header>

        <nav id="main-nav" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 mb-12">
        </nav>

        <main id="content-area" class="bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8 min-h-[400px]">
        </main>
    </div>

    <script>
        const originalReportTextContent = `
            <h1>Evidencias de la Evoluci√≥n Biol√≥gica</h1>
            <p>La evoluci√≥n biol√≥gica, el proceso por el cual las especies cambian a lo largo del tiempo, es un hecho apoyado por numerosas evidencias provenientes de diversas disciplinas cient√≠ficas. Estas pruebas permiten afirmar que la evoluci√≥n ha existido y sigue ocurriendo.</p>
            <p>Las principales pruebas de la evoluci√≥n incluyen:</p>
            <ul>
                <li>Pruebas anat√≥micas</li>
                <li>Pruebas embriol√≥gicas</li>
                <li>Pruebas paleontol√≥gicas</li>
                <li>Pruebas biogeogr√°ficas</li>
                <li>Pruebas bioqu√≠micas o moleculares</li>
                <li>Pruebas taxon√≥micas (basadas en la clasificaci√≥n de los seres vivos)</li>
            </ul>
            <h2>Pruebas Anat√≥micas</h2>
            <p>Las pruebas anat√≥micas se basan en el estudio comparado de la morfolog√≠a y anatom√≠a de diferentes especies, analizando tanto su estructura como su funci√≥n. Al comparar la anatom√≠a de distintos organismos, se descubren similitudes que sugieren un ancestro biol√≥gico com√∫n. Dentro de las pruebas anat√≥micas, se distinguen principalmente tres tipos de √≥rganos que ofrecen evidencia del proceso evolutivo: √≥rganos hom√≥logos, √≥rganos an√°logos y √≥rganos vestigiales.</p>
            <h3>√ìrganos Hom√≥logos:</h3>
            <p>Son aquellos que tienen el mismo origen embrionario y la misma o parecida estructura interna, aunque su forma externa y su funci√≥n pueden ser muy diferentes. Su semejanza estructura confirma que provienen de un antecesor com√∫n. La homolog√≠a surge por un proceso de evoluci√≥n divergente, donde un mismo √≥rgano ancestral se ha modificado y adaptado a diferentes entornos y funciones. Un ejemplo cl√°sico de √≥rganos hom√≥logos son las extremidades anteriores de los vertebrados. La pata de un caballo, el brazo humano, el ala de un murci√©lago o la aleta de un delf√≠n comparten el mismo dise√±o √≥seo fundamental (los mismos huesos), a pesar de estar adaptados a funciones muy diversas como correr, agarrar, volar o nadar.</p>
            <h3>√ìrganos An√°logos:</h3>
            <p>Estos √≥rganos tienen una estructura interna y un origen embrionario distintos, pero presentan forma y funci√≥n similares. Se encuentran en especies que no est√°n estrechamente emparentadas, pero que se han adaptado a condiciones ambientales o necesidades funcionales similares. La semejanza en este caso es resultado de la evoluci√≥n convergente, donde especies diferentes desarrollan soluciones parecidas a problemas adaptativos similares. Ejemplos de √≥rganos an√°logos son las alas de una mosca (un insecto) y las de un ave (un vertebrado); ambas estructuras sirven para volar, pero su construcci√≥n interna es muy diferente. De manera similar, las aletas de los peces y las aletas de los cet√°ceos (mam√≠feros marinos) cumplen una funci√≥n similar en la nataci√≥n, pero sus or√≠genes y estructuras son distintos. El ojo de los insectos y el ojo de los mam√≠feros tambi√©n son an√°logos; a pesar de sus estructuras muy diferentes, ambos cumplen la funci√≥n de captar luz e im√°genes. Otro caso es el "pulgar" del oso panda, que es una modificaci√≥n de un hueso de la mu√±eca y se usa para arrancar hojas de bamb√∫, funcionalmente similar a nuestro pulgar pero estructuralmente diferente.</p>
            <h3>√ìrganos Vestigiales:</h3>
            <p>Son √≥rganos que est√°n presentes en los seres vivos pero que no desempe√±an ninguna funci√≥n aparente en la actualidad. Se interpretan como restos atrofiados de √≥rganos que s√≠ eran funcionales en sus antepasados. La funci√≥n original de estos √≥rganos se ha perdido a medida que las especies han evolucionado y se han adaptado a nuevos entornos o modos de vida. Simplemente nos indican un parentesco evolutivo con otros seres vivos o formas ancestrales. En los seres humanos, se consideran √≥rganos vestigiales estructuras como el ap√©ndice vermiforme, los huesos soldados del c√≥ccix (vestigio de la cola), las muelas del juicio, la plica semilunaris (resto del tercer p√°rpado) o los m√∫sculos vestigiales que intervienen en el movimiento de las orejas. Otros ejemplos incluyen los restos de las extremidades posteriores en el esqueleto de las ballenas, que sugieren que sus antepasados eran cuadr√∫pedos terrestres. Estos √≥rganos residuales no realizan ninguna funci√≥n, de modo que su extirpaci√≥n no causa perjuicio.</p>
            <h2>Otras Pruebas de la Evoluci√≥n</h2>
            <h3>Pruebas Paleontol√≥gicas:</h3>
            <p>Se basan en el estudio de los f√≥siles, que son los restos o vestigios de organismos que vivieron en el pasado. El registro f√≥sil muestra que la mayor√≠a de las especies extintas son distintas de las actuales, pero a menudo guardan parecidos morfol√≥gicos, lo que sugiere un cambio gradual a lo largo del tiempo y una continuidad geneal√≥gica. Los f√≥siles permiten conocer los cambios que han sufrido las especies en su evoluci√≥n y reconstruir, aunque a veces de forma incompleta, la historia de linajes espec√≠ficos. Las series filogen√©ticas de f√≥siles, como la evoluci√≥n de la extremidad del caballo con la progresiva reducci√≥n de dedos, ilustran estos cambios graduales. Adem√°s, existen f√≥siles de transici√≥n, que presentan caracter√≠sticas intermedias entre dos grupos de organismos diferentes, como el Archaeopteryx, que muestra rasgos de reptil y de ave, ofreciendo una pista sobre c√≥mo pudo ocurrir la transici√≥n entre estos grupos.</p>
            <h3>Pruebas Biogeogr√°ficas:</h3>
            <p>Estas pruebas se fundamentan en la distribuci√≥n geogr√°fica de los seres vivos. La existencia de especies emparentadas que habitan en regiones geogr√°ficamente cercanas o con condiciones ambientales similares apoya la idea de que evolucionaron a partir de un ancestro com√∫n y luego se diversificaron al ocupar diferentes h√°bitats o al quedar aisladas geogr√°ficamente. La distribuci√≥n de especies como los cam√©lidos (llamas en Am√©rica del Sur, camellos en √Åfrica y Asia) o las grandes aves corredoras (avestruz en √Åfrica, √±and√∫ en Am√©rica del Sur, em√∫ en Australia) sugiere que derivan de ancestros que vivieron en continentes que estuvieron unidos y luego se separaron.</p>
            <h3>Pruebas Embriol√≥gicas:</h3>
            <p>Se basan en la comparaci√≥n del desarrollo embrionario de diferentes especies, particularmente en vertebrados. En las primeras etapas de su desarrollo, los embriones de distintos vertebrados (peces, anfibios, reptiles, aves, mam√≠feros) son muy similares, presentando estructuras como cola y hendiduras branquiales que sugieren un ancestro com√∫n acu√°tico. A medida que el desarrollo avanza, los embriones van diferenci√°ndose, siendo m√°s parecidos entre s√≠ aquellos que corresponden a especies m√°s emparentadas.</p>
            <h3>Pruebas Bioqu√≠micas o Moleculares:</h3>
            <p>Consisten en la comparaci√≥n de ciertas mol√©culas esenciales que se encuentran en todos los seres vivos, como el ADN y las prote√≠nas. Las especies m√°s emparentadas evolutivamente presentan una mayor similitud en la secuencia de nucle√≥tidos de su ADN y en la secuencia de amino√°cidos de sus prote√≠nas que las especies menos emparentadas. Estas similitudes moleculares proporcionan evidencia detallada sobre las relaciones de parentesco y la historia evolutiva. Por ejemplo, la comparaci√≥n del ADN humano y el del chimpanc√© muestra una alta identidad, lo que respalda su estrecho parentesco evolutivo. El estudio de prote√≠nas como el citocromo C, presente en la mayor√≠a de los organismos, tambi√©n revela el grado de parentesco entre diferentes especies: cuanto menor es la diferencia en la secuencia de amino√°cidos, mayor es el parentesco.</p>
            <h3>Pruebas Taxon√≥micas:</h3>
            <p>La clasificaci√≥n de los seres vivos (taxonom√≠a) se basa en las semejanzas y diferencias entre ellos. La organizaci√≥n jer√°rquica de los organismos en taxones (especie, g√©nero, familia, orden, clase, phylum, reino) refleja las relaciones de parentesco evolutivo. La existencia de organismos con caracter√≠sticas intermedias entre grandes grupos (como el ornitorrinco, que tiene rasgos de reptil y mam√≠fero) act√∫a como "puentes" que conectan distintos taxones y apoyan la idea de la continuidad geneal√≥gica a trav√©s de la evoluci√≥n.</p>
            <p>Todas estas l√≠neas de evidencia, desde el estudio de los f√≥siles hasta la comparaci√≥n de mol√©culas a nivel gen√©tico, convergen para respaldar de manera robusta la teor√≠a de la evoluci√≥n como el proceso que ha generado la vasta diversidad de vida en la Tierra.</p>
        `;

        const data = {
            inicio: {
                title: "Bienvenido al Explorador Evolutivo",
                icon: "üî¨",
                description: "La evoluci√≥n es uno de los pilares fundamentales de la biolog√≠a. Esta aplicaci√≥n te permite explorar sus pruebas de forma interactiva. <br><br>Utiliza las tarjetas de navegaci√≥n para sumergirte en cada categor√≠a, ver detalles, leer la explicaci√≥n detallada o prueba tus conocimientos con el cuestionario.",
                content: `<div class="chart-container h-[300px] sm:h-[350px] md:h-[400px] lg:h-[450px]"><canvas id="overviewChart"></canvas></div>`,
            },
            anatomicas: {
                title: "Pruebas Anat√≥micas",
                icon: "ü¶¥",
                description: "El estudio comparativo de la estructura y forma de los organismos revela similitudes que sugieren ancestros comunes y adaptaciones a diversos entornos.",
                detailedText: "Las pruebas anat√≥micas se centran en comparar la estructura f√≠sica (morfolog√≠a) de diferentes organismos. Al examinar con detenimiento la anatom√≠a, tanto de especies actuales como de aquellas que existieron en el pasado (a trav√©s de f√≥siles), los bi√≥logos pueden identificar patrones de similitud fundamentales. Estas semejanzas, especialmente cuando se encuentran en estructuras que comparten un mismo origen durante el desarrollo embrionario, son interpretadas como se√±ales de un linaje evolutivo com√∫n. Aunque las funciones de estas estructuras puedan haber variado enormemente para adaptarse a diferentes estilos de vida, su plan b√°sico subyacente revela una historia compartida. Este tipo de an√°lisis es esencial no solo para comprender c√≥mo la selecci√≥n natural ha ido moldeando las diversas formas de vida, sino tambi√©n para reconstruir el √°rbol geneal√≥gico de las especies, es decir, sus relaciones de parentesco o filogenia. Dentro de este campo, se estudian principalmente tres categor√≠as de √≥rganos: los hom√≥logos, que indican una herencia com√∫n; los an√°logos, que ilustran c√≥mo entornos similares pueden llevar a soluciones adaptativas parecidas en linajes distintos; y los vestigiales, que son como ecos del pasado funcional de los ancestros de una especie.",
                strengths: [
                    "Cuando observamos que √≥rganos en distintas especies, como el brazo humano, el ala de un murci√©lago o la aleta de una ballena, comparten una misma estructura √≥sea b√°sica, esto sugiere fuertemente que todas estas especies descienden de un ancestro com√∫n que pose√≠a ese patr√≥n estructural original. Esta es una de las indicaciones m√°s claras de parentesco evolutivo.",
                    "El an√°lisis comparativo de la anatom√≠a es una herramienta poderosa para reconstruir las grandes l√≠neas de descendencia evolutiva entre los principales grupos de seres vivos, ayudando a dibujar las ramas fundamentales del gran √°rbol de la vida.",
                    "La presencia de √≥rganos vestigiales, como el c√≥ccix (restos de una cola) en los seres humanos o los diminutos huesos de las patas traseras incrustados en el cuerpo de algunas ballenas y serpientes, nos habla de una herencia del pasado. Son como 'recuerdos' anat√≥micos de estructuras que fueron √∫tiles para sus antepasados pero que ya no cumplen la misma funci√≥n."
                ],
                weaknesses: [
                    "Es fundamental realizar un an√°lisis muy cuidadoso, prestando especial atenci√≥n al desarrollo embrionario y a los detalles finos de la estructura interna. De lo contrario, es f√°cil confundir una homolog√≠a (que indica parentesco real debido a un ancestro com√∫n) con una analog√≠a. Las analog√≠as son similitudes en la funci√≥n o apariencia que han surgido de forma independiente en diferentes linajes como respuesta a presiones ambientales similares (evoluci√≥n convergente), y no indican un parentesco cercano.",
                    "A lo largo de millones de a√±os de evoluci√≥n, algunos √≥rganos hom√≥logos pueden haberse modificado tan profundamente, o incluso haberse perdido por completo en ciertos grupos, que su identificaci√≥n y comparaci√≥n con estructuras equivalentes en otros linajes se vuelve una tarea muy compleja o, en algunos casos, imposible.",
                    "Determinar si un √≥rgano es verdaderamente vestigial (es decir, que ya no cumple ninguna funci√≥n) puede ser m√°s complicado de lo que parece. Algunas de estas estructuras, aunque reducidas, podr√≠an conservar funciones secundarias o sutiles que no son obvias a primera vista, o incluso haber adquirido nuevas funciones a lo largo del tiempo."
                ],
                organTypes: { 
                    homologos: {
                        key: 'homologos', 
                        title: "√ìrganos Hom√≥logos",
                        icon: "üîó", 
                        description: "Estructuras con origen com√∫n pero funciones potencialmente diferentes, reflejando evoluci√≥n divergente.",
                        detailedText: "Los √≥rganos hom√≥logos son un concepto central en la biolog√≠a evolutiva. Se definen como aquellas estructuras presentes en diferentes especies que comparten un mismo origen durante el desarrollo embrionario y una arquitectura interna fundamentalmente similar. Esta similitud estructural se debe a que fueron heredadas de un ancestro com√∫n. Sin embargo, a pesar de este origen compartido, los √≥rganos hom√≥logos pueden haber experimentado modificaciones significativas a lo largo de la evoluci√≥n, adapt√°ndose para desempe√±ar funciones muy diversas en los distintos linajes. Este proceso, donde una estructura ancestral se diversifica para cumplir nuevos roles, se conoce como evoluci√≥n divergente. Un ejemplo cl√°sico y muy ilustrativo es la extremidad anterior de los tetr√°podos (vertebrados con cuatro extremidades). El brazo de un ser humano, dise√±ado para la manipulaci√≥n; el ala de un murci√©lago o de un ave, adaptada para el vuelo; la aleta de una ballena o un delf√≠n, optimizada para la nataci√≥n; y la pata de un caballo, especializada para la carrera, son todos √≥rganos hom√≥logos. Si se examina su esqueleto, se observa el mismo patr√≥n b√°sico de huesos: un h√∫mero, seguido de un radio y un c√∫bito, luego los huesos del carpo (mu√±eca), los metacarpos y las falanges (dedos). Esta correspondencia estructural, a pesar de la variedad de formas y funciones externas, es una prueba contundente de su descendencia de un ancestro com√∫n que pose√≠a una extremidad con este plan b√°sico. El estudio detallado de los √≥rganos hom√≥logos es, por lo tanto, una herramienta indispensable para establecer las relaciones de parentesco entre las especies (filogenia) y para comprender los caminos que ha seguido la diversificaci√≥n evolutiva.",
                        diagram: `<div class="p-4 border rounded-lg bg-slate-50 text-center"><p class="font-semibold">Estructura √ìsea Com√∫n en Extremidades de Vertebrados</p><div class="flex flex-wrap justify-around mt-2 text-xs gap-1"><span class="p-2 bg-blue-200 rounded">H√∫mero</span><span class="p-2 bg-green-200 rounded">Radio/C√∫bito</span><span class="p-2 bg-yellow-200 rounded">Carpos</span><span class="p-2 bg-red-200 rounded">Falanges</span></div><p class="mt-4 text-sm text-slate-500">Un mismo plan estructural b√°sico, adaptado a diversas funciones como agarrar, volar, nadar o correr.</p></div>`
                    },
                    analogos: {
                        key: 'analogos',
                        title: "√ìrganos An√°logos",
                        icon: "‚úàÔ∏è", 
                        description: "Estructuras con diferente origen evolutivo pero funciones similares, resultado de la evoluci√≥n convergente.",
                        detailedText: "Los √≥rganos an√°logos representan un fen√≥meno fascinante en la evoluci√≥n. Se trata de estructuras que, aunque presentes en especies que no est√°n estrechamente emparentadas (es decir, no comparten un ancestro com√∫n reciente que poseyera dicha estructura), han evolucionado de manera independiente para cumplir funciones muy similares. Esta similitud en la funci√≥n, a pesar de un origen embrionario y una arquitectura interna fundamentalmente distintos, es el resultado de un proceso conocido como evoluci√≥n convergente. La evoluci√≥n convergente ocurre cuando diferentes linajes se enfrentan a presiones selectivas parecidas en sus respectivos ambientes y, como resultado, desarrollan 'soluciones' adaptativas similares para los mismos desaf√≠os funcionales. Un ejemplo muy citado es el de las alas de los insectos y las alas de las aves (o de los murci√©lagos, que son mam√≠feros). Ambas estructuras est√°n adaptadas para el vuelo, permitiendo a estos animales desplazarse por el aire. Sin embargo, su construcci√≥n es radicalmente diferente: las alas de los insectos son expansiones delgadas y membranosas de su exoesqueleto de quitina, mientras que las alas de las aves son extremidades anteriores modificadas, con una estructura interna de huesos, m√∫sculos, nervios y vasos sangu√≠neos, cubiertas de plumas. Otros ejemplos notables de √≥rganos an√°logos incluyen la forma hidrodin√°mica y fusiforme del cuerpo en los peces y en los mam√≠feros acu√°ticos como los delfines y las ballenas, que facilita el desplazamiento eficiente en el agua; o los ojos complejos de los vertebrados y los de los cefal√≥podos (como pulpos y calamares), que, aunque capaces de formar im√°genes detalladas, tienen or√≠genes evolutivos y v√≠as de desarrollo completamente separadas. Es importante destacar que los √≥rganos an√°logos no son indicadores de un parentesco evolutivo cercano, sino que m√°s bien ilustran la capacidad de la selecci√≥n natural para modelar soluciones adaptativas similares frente a problemas funcionales comunes en linajes muy distantes.",
                        diagram: `<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 border rounded-lg bg-slate-50 text-center"><p class="font-semibold">Ala de Insecto (Ej: Mariposa)</p><p class="text-xs mt-2">Formada por membranas sostenidas por venas de quitina. Origen ectod√©rmico.</p></div><div class="p-4 border rounded-lg bg-slate-50 text-center"><p class="font-semibold">Ala de Ave</p><p class="text-xs mt-2">Extremidad anterior modificada con huesos, m√∫sculos y plumas. Origen mesod√©rmico.</p></div><p class="md:col-span-2 mt-2 text-sm text-slate-500 text-center">Ambas sirven para volar, pero su estructura y origen son muy diferentes.</p></div>`
                    },
                    vestigiales: {
                        key: 'vestigiales',
                        title: "√ìrganos Vestigiales",
                        icon: "‚è≥", 
                        description: "Restos de √≥rganos que fueron funcionales en los antepasados de una especie pero que han perdido su funci√≥n principal.",
                        detailedText: "Los √≥rganos vestigiales son estructuras anat√≥micas que se encuentran en un organismo en una forma reducida o atrofiada, habiendo perdido la mayor parte o la totalidad de su funci√≥n original que s√≠ desempe√±aban en sus especies ancestrales. Estos √≥rganos son como 'ecos' o 'remanentes' de la historia evolutiva de un linaje, y su presencia es una evidencia muy convincente del proceso de cambio evolutivo y del parentesco entre diferentes formas de vida. A medida que las especies se adaptan a nuevos entornos o cambian sus modos de vida a lo largo de generaciones, algunas estructuras que antes eran √∫tiles pueden volverse innecesarias, o incluso representar un coste energ√©tico o un impedimento. En tales casos, la selecci√≥n natural puede favorecer a aquellos individuos con versiones reducidas de estas estructuras, llevando gradualmente a su atrofia o p√©rdida funcional. En los seres humanos, existen varios ejemplos bien conocidos de √≥rganos vestigiales. El ap√©ndice vermiforme, una peque√±a bolsa unida al intestino grueso, es considerado un vestigio de un ciego m√°s grande y funcional que en nuestros antepasados herb√≠voros ayudaba en la digesti√≥n de la celulosa. Los huesos del c√≥ccix, al final de la columna vertebral, son los restos fusionados de las v√©rtebras que formaban una cola en nuestros ancestros primates. Las muelas del juicio (terceros molares) eran √∫tiles cuando las dietas humanas eran m√°s abrasivas y las mand√≠bulas m√°s robustas, pero hoy en d√≠a a menudo causan problemas por falta de espacio. Otros ejemplos incluyen los peque√±os m√∫sculos que algunas personas pueden usar para mover ligeramente las orejas (mucho m√°s desarrollados y funcionales en otros mam√≠feros para orientar las orejas hacia los sonidos) o la plica semilunaris en el √°ngulo interno del ojo, un remanente del tercer p√°rpado o membrana nictitante que es funcional en muchos otros vertebrados. En el reino animal, un caso notable es el de las ballenas y algunas serpientes grandes como las boas y pitones, que conservan peque√±os huesos p√©lvicos y, en algunos casos, femorales, incrustados dentro de sus cuerpos, sin conexi√≥n con ninguna extremidad externa. Estos son claros indicadores de que sus antepasados fueron mam√≠feros terrestres cuadr√∫pedos. La existencia de √≥rganos vestigiales es dif√≠cil de explicar sin recurrir a la teor√≠a de la evoluci√≥n por descendencia con modificaci√≥n.",
                        diagram: `<div class="p-4 border rounded-lg bg-slate-50 text-center"><p class="font-semibold">Ejemplos de √ìrganos Vestigiales</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2 text-xs"><div class="p-2 bg-orange-100 rounded text-orange-700">C√≥ccix humano (cola vestigial)</div><div class="p-2 bg-lime-100 rounded text-lime-700">Ap√©ndice humano</div><div class="p-2 bg-cyan-100 rounded text-cyan-700">Muelas del juicio</div><div class="p-2 bg-purple-100 rounded text-purple-700">Huesos p√©lvicos en ballenas</div></div><p class="mt-4 text-sm text-slate-500">Estructuras reducidas que perdieron su funci√≥n original.</p></div>`
                    }
                }
            },
            paleontologicas: { 
                title: "Pruebas Paleontol√≥gicas", icon: "üóø", description: "El estudio de los f√≥siles proporciona una ventana directa a las formas de vida del pasado y evidencia el cambio gradual a lo largo del tiempo.", 
                detailedText: "Los f√≥siles son los restos o huellas de organismos que vivieron en el pasado, preservados en rocas sedimentarias, √°mbar, hielo u otros medios. El registro f√≥sil es una ventana directa al pasado de la vida en la Tierra. Muestra que las especies han cambiado a lo largo del tiempo, que muchas se han extinguido y que nuevas formas han surgido. Las series filogen√©ticas, como la evoluci√≥n de la extremidad del caballo, ilustran cambios graduales. Los f√≥siles de transici√≥n son especialmente importantes, ya que presentan caracter√≠sticas intermedias entre dos grupos de organismos diferentes, como el *Archaeopteryx*, que muestra rasgos de reptil (dientes, cola √≥sea larga) y de ave (plumas, alas). Estos f√≥siles son una prueba contundente de c√≥mo pudieron ocurrir las grandes transiciones evolutivas.",
                strengths: [
                    "Ofrecen la √∫nica evidencia directa de las formas de vida que existieron en el pasado, permitiendo observar cambios morfol√≥gicos a trav√©s de vastas escalas de tiempo geol√≥gico.",
                    "Los f√≥siles de transici√≥n son particularmente valiosos, ya que revelan formas intermedias entre grandes grupos taxon√≥micos, ilustrando c√≥mo ocurrieron las principales transiciones evolutivas (por ejemplo, de peces a anfibios, o de reptiles a aves).",
                    "Combinados con t√©cnicas de dataci√≥n radiom√©trica, los f√≥siles permiten establecer cronolog√≠as para la aparici√≥n y extinci√≥n de linajes, as√≠ como para importantes eventos evolutivos."
                ],
                weaknesses: [
                    "El proceso de fosilizaci√≥n es un evento excepcionalmente raro que requiere condiciones muy espec√≠ficas, lo que resulta en un registro f√≥sil inherentemente incompleto, con muchos 'huecos' y linajes pobremente representados.",
                    "Existen sesgos significativos en la conservaci√≥n de f√≥siles; por ejemplo, los organismos con partes duras (huesos, conchas) y aquellos que vivieron en ambientes acu√°ticos sedimentarios tienen muchas m√°s probabilidades de fosilizar que los organismos de cuerpo blando o terrestres.",
                    "La interpretaci√≥n de restos f√≥siles, especialmente si son fragmentarios, puede ser compleja y estar sujeta a diferentes reconstrucciones y debates cient√≠ficos. Adem√°s, aunque las t√©cnicas de dataci√≥n son cada vez m√°s precisas, siempre conllevan ciertos m√°rgenes de error."
                ]
            },
            biogeograficas: { 
                title: "Pruebas Biogeogr√°ficas", icon: "üåç", description: "La distribuci√≥n geogr√°fica de los seres vivos refleja su historia evolutiva y los cambios geol√≥gicos del planeta.", 
                detailedText: "La biogeograf√≠a estudia la distribuci√≥n de los seres vivos en la Tierra y las causas que la determinan. La distribuci√≥n actual de muchas especies solo puede explicarse a la luz de la evoluci√≥n y de los cambios geol√≥gicos del planeta, como la deriva continental. Especies que est√°n emparentadas evolutivamente tienden a encontrarse en regiones geogr√°ficas que estuvieron conectadas en el pasado o que son adyacentes. Por ejemplo, la presencia de marsupiales en Australia y Sudam√©rica, y su ausencia en otros continentes (salvo algunas excepciones), se explica por su origen en Gondwana y su posterior aislamiento. La distribuci√≥n de los cam√©lidos (llamas y vicu√±as en Sudam√©rica; camellos y dromedarios en Asia y √Åfrica) tambi√©n es un ejemplo cl√°sico. Las islas oce√°nicas, que nunca han estado conectadas a continentes, suelen albergar especies end√©micas (√∫nicas de ese lugar) que est√°n estrechamente relacionadas con especies de los continentes m√°s cercanos, lo que evidencia procesos de colonizaci√≥n y especiaci√≥n posterior.",
                strengths: [
                    "Proporcionan explicaciones coherentes para los patrones de distribuci√≥n de especies a escala global y regional, conectando la evoluci√≥n biol√≥gica con la historia geol√≥gica de la Tierra, como la deriva de los continentes y la formaci√≥n de cadenas monta√±osas o islas.",
                    "La presencia de especies end√©micas (aquellas que solo se encuentran en un lugar espec√≠fico) en islas o regiones geogr√°ficamente aisladas constituye una fuerte evidencia de procesos de especiaci√≥n que ocurren cuando las poblaciones quedan separadas y evolucionan de forma independiente.",
                    "Ayudan a comprender c√≥mo los eventos de dispersi√≥n y vicarianza (separaci√≥n de una poblaci√≥n ancestral por una barrera geogr√°fica) han moldeado la diversidad actual de la vida."
                ],
                weaknesses: [
                    "Los eventos fortuitos de dispersi√≥n a larga distancia (por ejemplo, semillas transportadas por aves o animales flotando en balsas naturales) pueden, en ocasiones, complicar la interpretaci√≥n de los patrones de distribuci√≥n que se basar√≠an √∫nicamente en la separaci√≥n gradual de masas terrestres.",
                    "La evoluci√≥n convergente puede llevar a que especies no relacionadas desarrollen adaptaciones y apariencias similares en ambientes parecidos en diferentes partes del mundo, lo que podr√≠a malinterpretarse como una se√±al de parentesco cercano si no se complementa con otros tipos de evidencia, como la molecular.",
                    "Una interpretaci√≥n biogeogr√°fica robusta requiere un buen entendimiento de la historia geol√≥gica y clim√°tica pasada de las regiones estudiadas, informaci√≥n que puede ser incompleta o menos precisa para ciertas √°reas o periodos temporales."
                ]
            },
            embriologicas: { 
                title: "Pruebas Embriol√≥gicas", icon: "ü•ö", description: "La comparaci√≥n del desarrollo embrionario entre diferentes especies revela similitudes tempranas que apuntan a un ancestro com√∫n.", 
                detailedText: "El estudio del desarrollo embrionario comparado revela similitudes sorprendentes entre diferentes grupos de organismos, especialmente en las primeras etapas. Por ejemplo, los embriones de todos los vertebrados (peces, anfibios, reptiles, aves y mam√≠feros) pasan por una etapa en la que presentan hendiduras branquiales y una cola, aunque estas estructuras puedan desaparecer o modificarse profundamente en el adulto. Estas similitudes se interpretan como una evidencia de un ancestro com√∫n del que todos estos grupos han derivado. La famosa, aunque hoy matizada, frase de Ernst Haeckel, \"la ontogenia recapitula la filogenia\", se refer√≠a a esta idea. En invertebrados, la presencia de tipos larvales comunes, como la larva troc√≥fora en an√©lidos y moluscos, tambi√©n es una fuerte indicaci√≥n de parentesco evolutivo, a pesar de las grandes diferencias que puedan existir entre los adultos de estos grupos.",
                strengths: [
                    "Las similitudes observadas en las primeras etapas del desarrollo embrionario, como la presencia de hendiduras far√≠ngeas o una notocorda en todos los embriones de cordados, pueden revelar planes corporales fundamentales y relaciones evolutivas profundas que no son evidentes en los organismos adultos.",
                    "En muchos grupos de invertebrados, la compartici√≥n de tipos larvales espec√≠ficos (como la larva troc√≥fora en an√©lidos y moluscos, o la larva nauplio en crust√°ceos) es una fuerte evidencia de parentesco, incluso cuando las formas adultas son morfol√≥gicamente muy dispares.",
                    "El estudio de los genes que controlan el desarrollo (genes Hox, por ejemplo) ha proporcionado una base molecular para entender estas similitudes embrionarias y c√≥mo peque√±os cambios en la regulaci√≥n de estos genes pueden llevar a grandes diferencias en la forma adulta."
                ],
                weaknesses: [
                    "La afirmaci√≥n cl√°sica de Haeckel de que \"la ontogenia recapitula la filogenia\" (es decir, que el desarrollo de un individuo repite las etapas adultas de sus ancestros evolutivos) es una simplificaci√≥n excesiva y, en muchos aspectos, se considera incorrecta en su formulaci√≥n literal.",
                    "Los embriones y las larvas est√°n sujetos a sus propias presiones selectivas y pueden desarrollar adaptaciones espec√≠ficas a su entorno particular (por ejemplo, para la dispersi√≥n o la alimentaci√≥n planct√≥nica), lo que puede modificar o enmascarar las caracter√≠sticas ancestrales compartidas.",
                    "Obtener y comparar embriones en etapas de desarrollo estrictamente equivalentes para una amplia gama de especies puede ser t√©cnicamente desafiante y requiere un conocimiento detallado de la biolog√≠a del desarrollo de cada grupo."
                ]
            },
            bioquimicas: {
                title: "Pruebas Bioqu√≠micas", icon: "üß¨", description: "La comparaci√≥n de mol√©culas esenciales como el ADN y las prote√≠nas entre especies ofrece la evidencia m√°s robusta y detallada del parentesco evolutivo.", 
                detailedText: "Las pruebas bioqu√≠micas o moleculares son unas de las m√°s poderosas y directas para inferir relaciones evolutivas. Se basan en la comparaci√≥n de mol√©culas fundamentales para la vida, como el ADN (√°cido desoxirribonucleico), el ARN (√°cido ribonucleico) y las prote√≠nas. Todos los seres vivos comparten un c√≥digo gen√©tico pr√°cticamente universal, lo que es una fuerte evidencia de un origen com√∫n. Cuanto m√°s estrechamente emparentadas est√©n dos especies, mayor ser√° la similitud en la secuencia de nucle√≥tidos de su ADN y en la secuencia de amino√°cidos de sus prote√≠nas. Por ejemplo, el genoma humano y el del chimpanc√© comparten m√°s del 98% de identidad. Estas comparaciones permiten construir √°rboles filogen√©ticos muy detallados y cuantitativos, e incluso estimar los tiempos de divergencia entre linajes mediante la t√©cnica del \"reloj molecular\", que asume una tasa de mutaci√≥n relativamente constante para ciertos genes.",
                strengths: [
                    "Proporcionan una vasta cantidad de datos objetivos y cuantificables (secuencias de nucle√≥tidos o amino√°cidos) que permiten realizar comparaciones muy precisas y rigurosas entre organismos.",
                    "La universalidad del c√≥digo gen√©tico y la conservaci√≥n de muchas mol√©culas fundamentales (como el ADN, el ARN, el ATP y ciertas prote√≠nas como el citocromo C) permiten comparar incluso organismos muy distantemente relacionados en el √°rbol de la vida.",
                    "Son la herramienta m√°s poderosa disponible actualmente para construir √°rboles filogen√©ticos detallados y resolver relaciones de parentesco que pueden ser ambiguas si solo se consideran datos morfol√≥gicos.",
                    "Bajo ciertas asunciones y calibraciones, las tasas de cambio molecular en secuencias de ADN o prote√≠nas pueden utilizarse como un \"reloj molecular\" para estimar los tiempos de divergencia entre diferentes linajes evolutivos."
                ],
                weaknesses: [
                    "El an√°lisis de datos moleculares requiere equipamiento de laboratorio especializado para la secuenciaci√≥n y an√°lisis bioinform√°ticos complejos para procesar y comparar las secuencias.",
                    "Especialmente en procariotas (bacterias y arqueas), el fen√≥meno de la transferencia horizontal de genes (THG) puede transferir material gen√©tico entre especies que no est√°n directamente emparentadas, lo que puede complicar la reconstrucci√≥n filogen√©tica si se basa en genes individuales susceptibles a este proceso.",
                    "Diferentes genes y diferentes linajes de organismos pueden evolucionar a tasas moleculares distintas, lo que debe tenerse en cuenta cuidadosamente al aplicar modelos de reloj molecular y al seleccionar los marcadores gen√©ticos apropiados para cada estudio.",
                    "La obtenci√≥n de ADN o prote√≠nas de calidad y en cantidad suficiente a partir de f√≥siles muy antiguos es a menudo extremadamente dif√≠cil o imposible, lo que limita la aplicaci√≥n directa de estas pruebas a muchas especies extintas."
                ]
            },
            taxonomicas: {
                title: "Pruebas Taxon√≥micas", icon: "üìö", description: "La forma en que clasificamos a los seres vivos en una jerarqu√≠a anidada refleja de manera natural sus relaciones de descendencia con modificaci√≥n.", 
                detailedText: "La taxonom√≠a es la ciencia de la clasificaci√≥n de los seres vivos. Un sistema de clasificaci√≥n natural, como el que se utiliza actualmente, agrupa a los organismos en una jerarqu√≠a de taxones (especie, g√©nero, familia, orden, clase, filo, reino) bas√°ndose en sus similitudes y diferencias, que se interpretan como reflejo de sus relaciones evolutivas. La idea es que los organismos que comparten un tax√≥n superior (por ejemplo, todos los miembros de la familia Felidae, los f√©lidos) descienden de un ancestro com√∫n m√°s reciente que aquellos con los que solo comparten un tax√≥n a√∫n m√°s alto (como el orden Carnivora). La existencia de organismos con caracter√≠sticas intermedias entre grandes grupos, como el ornitorrinco (que pone huevos como los reptiles pero amamanta a sus cr√≠as como los mam√≠feros), act√∫a como un \"eslab√≥n\" o \"puente\" que apoya la idea de la continuidad geneal√≥gica y la evoluci√≥n gradual.",
                strengths: [
                    "Un sistema de clasificaci√≥n natural, que se esfuerza por agrupar a los organismos bas√°ndose en homolog√≠as (caracter√≠sticas heredadas de un ancestro com√∫n) y, cada vez m√°s, en datos moleculares, intenta reflejar la historia evolutiva y las relaciones de descendencia de la vida.",
                    "Proporciona un sistema l√≥gico y jer√°rquico para organizar y nombrar la vasta diversidad de los seres vivos, facilitando la comunicaci√≥n cient√≠fica y la comprensi√≥n de los patrones biol√≥gicos.",
                    "Una clasificaci√≥n bien fundamentada tiene un considerable poder predictivo; si conocemos la posici√≥n taxon√≥mica de un organismo, podemos inferir muchas de sus caracter√≠sticas probables bas√°ndonos en lo que sabemos de otros miembros de su grupo."
                ],
                weaknesses: [
                    "Los sistemas de clasificaci√≥n tempranos, basados predominantemente en la morfolog√≠a externa, a menudo agrupaban incorrectamente a los organismos por analog√≠as (similitudes debidas a la evoluci√≥n convergente) en lugar de homolog√≠as, lo que llevaba a clasificaciones que no reflejaban el parentesco real.",
                    "La definici√≥n precisa de lo que constituye una \"especie\" (el tax√≥n fundamental) y los l√≠mites exactos entre otros taxones (como g√©nero o familia) pueden ser objeto de considerable debate cient√≠fico y revisi√≥n constante.",
                    "Los sistemas taxon√≥micos no son est√°ticos; se revisan y modifican continuamente a medida que se dispone de nueva evidencia, especialmente la proveniente de an√°lisis moleculares, lo que puede llevar a cambios significativos y a veces controvertidos en la forma de agrupar a los organismos."
                ]
            },
            explicacionDetallada: { 
                title: "Explicaci√≥n detallada",
                icon: "üìú",
                description: "Lee la explicaci√≥n completa de las pruebas evolutivas y accede a la opci√≥n para imprimirla.",
                originalReportText: originalReportTextContent 
            },
            cuestionario: {
                title: "Cuestionario Pr√°ctico", icon: "üìù", description: "Pon a prueba tus conocimientos sobre las pruebas de la evoluci√≥n.",
                questions: [
                    { text: "Las extremidades anteriores de un humano y el ala de un murci√©lago son ejemplos de √≥rganos...", options: [{ text: "An√°logos", correct: false }, { text: "Hom√≥logos", correct: true }, { text: "Vestigiales", correct: false }], feedback: "Correcto. Los √≥rganos hom√≥logos tienen el mismo origen embrionario y estructura interna, aunque su funci√≥n pueda ser diferente." },
                    { text: "El Archaeopteryx es un ejemplo de:", options: [{ text: "Un f√≥sil viviente", correct: false }, { text: "Un f√≥sil de transici√≥n", correct: true }, { text: "Una prueba biogeogr√°fica", correct: false }], feedback: "Correcto. Archaeopteryx muestra caracter√≠sticas intermedias entre reptiles y aves." },
                    { text: "¬øQu√© tipo de mol√©culas se comparan principalmente en las pruebas bioqu√≠micas?", options: [{ text: "ADN y prote√≠nas", correct: true }, { text: "Carbohidratos y l√≠pidos", correct: false }, { text: "Sales minerales", correct: false }], feedback: "Correcto. La comparaci√≥n de secuencias de ADN y prote√≠nas es fundamental en las pruebas bioqu√≠micas." },
                    { text: "La presencia de una larva troc√≥fora com√∫n en an√©lidos y moluscos es una prueba de tipo:", options: [{ text: "Paleontol√≥gica", correct: false }, { text: "Embriol√≥gica", correct: true }, { text: "Bioqu√≠mica", correct: false }], feedback: "Correcto. Las similitudes en los estados larvales son parte de las pruebas embriol√≥gicas." },
                    { text: "La distribuci√≥n actual de los cam√©lidos es un ejemplo de prueba:", options: [{ text: "Anat√≥mica", correct: false }, { text: "Bioqu√≠mica", correct: false }, { text: "Biogeogr√°fica", correct: true }], feedback: "Correcto. La biogeograf√≠a estudia la distribuci√≥n de las especies y c√≥mo esta apoya la evoluci√≥n." },
                    { text: "El ap√©ndice en los humanos es considerado un √≥rgano:", options: [{ text: "Hom√≥logo", correct: false }, { text: "An√°logo", correct: false }, { text: "Vestigial", correct: true }], feedback: "Correcto. El ap√©ndice es un √≥rgano vestigial, un remanente de una estructura que era funcional en nuestros ancestros." },
                    { text: "¬øCu√°l de estas afirmaciones sobre el registro f√≥sil es CIERTA?", options: [{ text: "Es completo y contiene todas las especies que han existido.", correct: false }, { text: "Muestra que las especies no han cambiado con el tiempo.", correct: false }, { text: "Es incompleto pero proporciona evidencia directa de vida pasada.", correct: true }], feedback: "Correcto. El registro f√≥sil es incompleto, pero es una prueba crucial de la vida en el pasado y los cambios evolutivos." },
                    { text: "La similitud en el c√≥digo gen√©tico entre casi todos los seres vivos es una fuerte evidencia de:", options: [{ text: "Evoluci√≥n convergente", correct: false }, { text: "Un ancestro com√∫n universal", correct: true }, { text: "Adaptaci√≥n a ambientes similares", correct: false }], feedback: "Correcto. La universalidad del c√≥digo gen√©tico sugiere un origen com√∫n para toda la vida en la Tierra." },
                    { text: "Las alas de una mariposa y las alas de un p√°jaro son √≥rganos:", options: [{ text: "Hom√≥logos, porque sirven para volar.", correct: false }, { text: "An√°logos, porque tienen diferente origen evolutivo pero similar funci√≥n.", correct: true }, { text: "Vestigiales, porque no son perfectas para el vuelo.", correct: false }], feedback: "Correcto. Son an√°logos; cumplen la misma funci√≥n (volar) pero tienen or√≠genes evolutivos y estructuras internas muy diferentes." },
                    { text: "La clasificaci√≥n de los seres vivos en g√©neros, familias, √≥rdenes, etc., se basa en:", options: [{ text: "√önicamente en su h√°bitat.", correct: false }, { text: "Sus relaciones de parentesco evolutivo.", correct: true }, { text: "Su tama√±o y color.", correct: false }], feedback: "Correcto. La taxonom√≠a moderna busca agrupar a los organismos seg√∫n sus relaciones evolutivas." }
                ]
            }
        };

        const mainNav = document.getElementById('main-nav');
        const contentArea = document.getElementById('content-area');
        let currentView = 'inicio';
        let currentMainProofKey = null; 
        let currentOrganTypeKey = null; 

        let overviewChartInstance = null;
        let currentQuestionIndex = 0;
        let userScore = 0;
        let quizQuestions = [];

        function printOriginalText() {
            const reportContent = data.explicacionDetallada.originalReportText; 
            const printWindow = window.open('', '_blank', 'height=600,width=800');
            printWindow.document.write('<html><head><title>Explicaci√≥n Detallada: Pruebas de la Evoluci√≥n Biol√≥gica</title>'); 
            printWindow.document.write('<style> body { font-family: Inter, sans-serif; margin: 20px; color: #334155; } h1 { font-size: 1.8rem; font-weight: bold; margin-bottom: 1rem; color: #1e293b; } h2 { font-size: 1.5rem; font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.75rem; color: #334155; } h3 { font-size: 1.25rem; font-weight: bold; margin-top: 1rem; margin-bottom: 0.5rem; color: #475569; } p { margin-bottom: 1rem; line-height: 1.6; text-align: justify;} ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; } li { margin-bottom: 0.25rem; } </style>');
            printWindow.document.write('</head><body>');
            printWindow.document.write(reportContent);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.focus(); 
            setTimeout(() => { 
                 printWindow.print();
                 printWindow.close();
            }, 250);
        }

        function renderContent(key, viewType = 'main') { 
            currentView = key; 
            const item = data[key] || (data.anatomicas.organTypes && data.anatomicas.organTypes[key]);

            if (!item) {
                console.error("No data found for key:", key);
                contentArea.innerHTML = "<p>Contenido no encontrado.</p>";
                return;
            }
            
            if (viewType === 'main' || viewType === 'detailedProof' || viewType === 'strengthsWeaknesses') {
                 currentMainProofKey = key;
                 currentOrganTypeKey = null;
            } else if (viewType === 'organSpecificDetailed') {
                currentMainProofKey = 'anatomicas'; 
                currentOrganTypeKey = key;
            }

            let html = '';

            if (key === 'inicio') {
                html = `
                    <div id="inicio-content" class="content-section active">
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-2 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${item.icon}</span> ${item.title}</h2>
                        <p class="text-slate-600 mb-6">${item.description}</p>
                        <hr class="my-6">
                        <div>${item.content}</div>
                    </div>`;
            } else if (key === 'explicacionDetallada') { 
                 html = `
                    <div id="${key}-content" class="content-section active">
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-2 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${item.icon}</span> ${item.title}</h2>
                        <p class="text-slate-600 mb-6">${item.description}</p>
                        <button onclick="printOriginalText()" class="mb-6 bg-sky-500 hover:bg-sky-600 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path fill-rule="evenodd" d="M5 2.75C5 1.784 5.784 1 6.75 1h6.5c.966 0 1.75.784 1.75 1.75v3.552c.377.046.752.097 1.126.153A2.224 2.224 0 0118.5 8.679V12.5a5 5 0 01-5 5h-7a5 5 0 01-5-5V8.679a2.224 2.224 0 012.374-2.217c.374-.056.75-.107 1.127-.153V2.75zm8.5 0V6.303a3.723 3.723 0 00-2.25.021V2.75a.25.25 0 00-.25-.25h-6.5a.25.25 0 00-.25.25v3.574a3.722 3.722 0 00-2.25-.021V2.75C5.5 2.06 6.06 1.5 6.75 1.5h6.5c.69 0 1.25.56 1.25 1.25zM10 10a1 1 0 00-1 1v.25a.75.75 0 001.5 0V11a1 1 0 00-1-1z" clip-rule="evenodd" /><path d="M5 10.5a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5A.75.75 0 015 10.5zM5 13a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5A.75.75 0 015 13z" /></svg>
                            Imprimir a PDF
                        </button>
                        <hr class="my-6">
                        <div class="original-text-content prose prose-slate max-w-none text-slate-700 leading-relaxed text-justify">
                            ${item.originalReportText}
                        </div>
                         <button onclick="renderContent('inicio')" class="mt-8 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-lg">Volver al Inicio</button>
                    </div>
                `;
            } else if (key === 'cuestionario') {
                 html = `
                    <div id="${key}-content" class="content-section active">
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-2 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${item.icon}</span> ${item.title}</h2>
                        <p class="text-slate-600 mb-6">${item.description}</p>
                        <hr class="my-6">
                        <div id="quiz-container"></div>
                    </div>`;
            } else if (key === 'anatomicas' && viewType === 'main') { 
                const anatomicasItem = data.anatomicas;
                html = `
                    <div id="anatomicas-intermediate" class="content-section active">
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-2 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${anatomicasItem.icon}</span> ${anatomicasItem.title}</h2>
                        <p class="text-slate-600 mb-6 text-justify">${anatomicasItem.description}</p>
                        <hr class="my-6">
                        <h3 class="text-xl font-semibold text-slate-700 mb-4">Tipos de √ìrganos y su Significado Evolutivo:</h3>
                        <div class="grid md:grid-cols-3 gap-4 mb-6">
                            ${Object.keys(anatomicasItem.organTypes).map(organKey => {
                                const organ = anatomicasItem.organTypes[organKey];
                                return `
                                <button onclick="renderContent('${organKey}', 'organSpecificDetailed')" class="sub-nav-card bg-white p-4 rounded-lg shadow-md border-2 border-transparent text-left">
                                    <span class="text-2xl">${organ.icon}</span>
                                    <h4 class="font-bold mt-2 text-slate-800">${organ.title}</h4>
                                    <p class="text-sm text-slate-500 mt-1">${organ.description}</p>
                                </button>`;
                            }).join('')}
                        </div>
                        <div class="mt-8 pt-6 border-t flex flex-col sm:flex-row gap-4">
                            <button onclick="renderContent('anatomicas', 'strengthsWeaknesses')" class="analysis-card p-4 rounded-lg shadow hover:shadow-md transition-shadow w-full text-left">
                                <h3 class="font-semibold text-sky-700 text-lg">üîé Analizar Fortalezas y Debilidades de las Pruebas Anat√≥micas</h3>
                            </button>
                            <button onclick="renderContent('inicio')" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-6 rounded-lg h-full flex items-center justify-center w-full sm:w-auto mt-4 sm:mt-0">Volver al Inicio</button>
                        </div>
                    </div>`;
            } else if (viewType === 'organSpecificDetailed') { 
                 const organItem = data.anatomicas.organTypes[key];
                 html = `
                    <div id="${key}-organ-detailed" class="content-section active">
                        <div class="flex flex-wrap gap-4 mb-6">
                            <button onclick="renderContent('anatomicas', 'main')" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-2 px-4 rounded-lg inline-flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg>
                                Volver a Pruebas Anat√≥micas
                            </button>
                             <button onclick="renderContent('inicio')" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-2 px-4 rounded-lg inline-flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path d="M9.25 3.5a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM6.25.75A.75.75 0 005.5 0H2.75a.75.75 0 00-.75.75v12.5c0 .414.336.75.75.75h14.5a.75.75 0 00.75-.75V8.25a.75.75 0 00-1.5 0V13H4V1.5h1.5a.75.75 0 00.75-.75zM9.5 5a.75.75 0 00-1.28-.53L3.97 8.72a.75.75 0 000 1.06l4.25 4.25a.75.75 0 001.06-1.06L6.81 10l2.69-2.69A.75.75 0 009.5 5z" /></svg>
                                Volver al Inicio
                            </button>
                        </div>
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-4 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${organItem.icon}</span> ${organItem.title}</h2>
                        <div class="prose prose-slate max-w-none text-slate-700 leading-relaxed text-justify mb-6">${organItem.detailedText}</div>
                        ${organItem.diagram ? `<div class="my-6">${organItem.diagram}</div>` : ''}
                    </div>`;
            } else if (viewType === 'detailedProof') { 
                html = `
                    <div id="${key}-detailed-content" class="content-section active">
                         <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-4 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${item.icon}</span> ${item.title}</h2>
                        <p class="text-slate-600 mb-6">${item.description}</p>
                        <hr class="my-6">
                        <div class="prose prose-slate max-w-none text-slate-700 leading-relaxed text-justify mb-6">${item.detailedText}</div>
                        <div class="mt-8 pt-6 border-t flex flex-col sm:flex-row gap-4">
                             <button onclick="renderContent('${key}', 'strengthsWeaknesses')" class="analysis-card p-4 rounded-lg shadow hover:shadow-md transition-shadow w-full text-left">
                                <h3 class="font-semibold text-sky-700 text-lg">üîé Analizar Fortalezas y Debilidades de esta Prueba</h3>
                            </button>
                            <button onclick="renderContent('inicio')" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-6 rounded-lg h-full flex items-center justify-center w-full sm:w-auto mt-4 sm:mt-0">Volver al Inicio</button>
                        </div>
                    </div>
                `;
            } else if (viewType === 'strengthsWeaknesses') {
                const mainProofItem = data[currentMainProofKey]; 
                html = `
                    <div id="${currentMainProofKey}-analysis-content" class="content-section active">
                        <button onclick="renderContent('${currentMainProofKey}', '${currentMainProofKey === 'anatomicas' ? 'main' : 'detailedProof'}')" class="mb-6 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-2 px-4 rounded-lg inline-flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg>
                            Volver a ${mainProofItem.title}
                        </button>
                        <h2 class="text-2xl sm:text-3xl font-bold text-slate-800 mb-4 flex items-center"><span class="text-3xl sm:text-4xl mr-3">${mainProofItem.icon}</span> An√°lisis de ${mainProofItem.title}</h2>
                        <div class="mt-6 grid md:grid-cols-2 gap-x-8 gap-y-6">
                            <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <h3 class="font-bold text-xl text-green-800 mb-3">Puntos Fuertes como Evidencia Evolutiva</h3>
                                <ul class="space-y-2 text-green-700 text-justify">
                                    ${mainProofItem.strengths.map(s => `<li class="leading-relaxed"><span class="font-semibold">‚úî</span> ${s}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                 <h3 class="font-bold text-xl text-red-800 mb-3">Consideraciones y Posibles Limitaciones</h3>
                                <ul class="space-y-2 text-red-700 text-justify">
                                    ${mainProofItem.weaknesses.map(w => `<li class="leading-relaxed"><span class="font-semibold">‚ö†Ô∏è</span> ${w}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        <button onclick="renderContent('inicio')" class="mt-8 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-lg">Volver al Inicio</button>
                    </div>
                `;
            }


            contentArea.innerHTML = html;

            document.querySelectorAll('.nav-card').forEach(card => {
                card.classList.remove('active', 'current-section-active');
                if (card.dataset.key === currentMainProofKey) { 
                    card.classList.add(currentOrganTypeKey || viewType === 'strengthsWeaknesses' ? 'current-section-active' : 'active');
                }
            });
            
            if (key === 'inicio' && document.getElementById('overviewChart')) {
                renderOverviewChart();
            } else if (key === 'cuestionario') {
                startQuiz();
            }
        }
        
        function renderNav() {
            const keys = Object.keys(data);
            mainNav.innerHTML = keys.map(key => {
                const item = data[key];
                let spanClass = '';
                if (key === 'inicio') {
                    spanClass = 'sm:col-span-2 md:col-span-3 lg:col-span-4';
                }
                return `
                    <button data-key="${key}" class="nav-card text-left bg-white p-4 rounded-lg shadow-md border-2 border-transparent ${spanClass}">
                        <span class="text-3xl">${item.icon}</span>
                        <h3 class="font-bold mt-2 text-slate-800">${item.title}</h3>
                        ${key === 'inicio' ? `<p class="text-sm text-slate-500 mt-1">${item.description.split('<br>')[0]}</p>` : ''}
                    </button>
                `;
            }).join('');
            
            document.querySelectorAll('.nav-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const key = e.currentTarget.dataset.key;
                    if (key === 'inicio' || key === 'explicacionDetallada' || key === 'cuestionario') {
                        renderContent(key); 
                    } else if (key === 'anatomicas') {
                        renderContent(key, 'main'); 
                    }
                    else {
                        renderContent(key, 'detailedProof'); 
                    }
                });
            });
        }
        
        function renderOverviewChart() {
            const ctx = document.getElementById('overviewChart').getContext('2d');
            if (overviewChartInstance) { overviewChartInstance.destroy(); }
            const chartData = { labels: ['Anat√≥micas', 'Paleontol√≥gicas', 'Biogeogr√°ficas', 'Embriol√≥gicas', 'Bioqu√≠micas', 'Taxon√≥micas'], datasets: [{ label: 'Poder para establecer parentesco', data: [4, 4, 3, 3, 5, 3], backgroundColor: 'rgba(20, 184, 166, 0.6)', borderColor: 'rgba(13, 148, 136, 1)', borderWidth: 1 }, { label: 'Claridad como prueba de cambio', data: [3, 5, 4, 2, 4, 2], backgroundColor: 'rgba(51, 65, 85, 0.6)', borderColor: 'rgba(30, 41, 59, 1)', borderWidth: 1 }]};
            overviewChartInstance = new Chart(ctx, { type: 'bar', data: chartData, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { x: { beginAtZero: true, max: 5, ticks: { stepSize: 1, callback: function(v) { return ['Nulo', 'Bajo', 'Medio', 'Fuerte', 'Muy Fuerte'][v] || ''; }} } }, plugins: { title: { display: true, text: 'Comparaci√≥n de Utilidad de las Pruebas (Evaluaci√≥n Cualitativa)', font: { size: 16 }, padding: {bottom: 20}, color: '#334155' }, legend: {labels: {boxWidth:15, padding:15}}, tooltip: { callbacks: {label: function(c){let l=c.dataset.label||'';if(l){l+=': '}const v=c.raw;l+=(['Nulo','Bajo','Medio','Fuerte','Muy Fuerte'][v]||'N/A');return l;}}}}}});
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            userScore = 0;
            quizQuestions = data.cuestionario.questions.map(q => ({...q, answered: false, selectedOption: null, isCorrect: null }));
            displayQuizQuestion();
        }

        function displayQuizQuestion() {
            const quizContainer = document.getElementById('quiz-container');
            if (!quizContainer) return;

            if (currentQuestionIndex < quizQuestions.length) {
                const q = quizQuestions[currentQuestionIndex];
                let optionsHtml = q.options.map((opt, index) => `
                    <div class="quiz-option border-2 border-slate-300 p-3 rounded-lg mb-2 hover:bg-teal-50" data-option-index="${index}">
                        ${opt.text}
                    </div>
                `).join('');

                quizContainer.innerHTML = `
                    <div class="mb-4">
                        <p class="text-slate-700 font-semibold text-lg">Pregunta ${currentQuestionIndex + 1} de ${quizQuestions.length}:</p>
                        <p class="text-slate-800 text-xl mt-1">${q.text}</p>
                    </div>
                    <div id="quiz-options">${optionsHtml}</div>
                    <div id="quiz-feedback" class="mt-4 p-3 rounded-lg text-sm"></div>
                    <div class="mt-6 flex flex-col sm:flex-row gap-2">
                        <button id="check-answer-btn" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-6 rounded-lg w-full sm:w-auto">Comprobar</button>
                        <button id="next-question-btn" class="bg-slate-600 hover:bg-slate-700 text-white font-semibold py-2 px-6 rounded-lg w-full sm:w-auto" style="display:none;">Siguiente</button>
                    </div>
                `;

                document.querySelectorAll('.quiz-option').forEach(optDiv => {
                    optDiv.addEventListener('click', (e) => {
                        if (q.answered) return;
                        document.querySelectorAll('.quiz-option').forEach(d => d.classList.remove('selected', 'border-teal-500'));
                        e.currentTarget.classList.add('selected', 'border-teal-500');
                        q.selectedOption = parseInt(e.currentTarget.dataset.optionIndex);
                    });
                });

                document.getElementById('check-answer-btn').addEventListener('click', checkAnswer);
                document.getElementById('next-question-btn').addEventListener('click', () => {
                    currentQuestionIndex++;
                    displayQuizQuestion();
                });

            } else {
                displayQuizResults();
            }
        }

        function checkAnswer() {
            const q = quizQuestions[currentQuestionIndex];
            if (q.selectedOption === null) {
                document.getElementById('quiz-feedback').innerHTML = `<p class="text-red-600 font-semibold">Por favor, selecciona una opci√≥n.</p>`;
                document.getElementById('quiz-feedback').classList.remove('bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
                return;
            }

            q.answered = true;
            const selectedOptEl = document.querySelector(`.quiz-option[data-option-index="${q.selectedOption}"]`);
            const feedbackEl = document.getElementById('quiz-feedback');
            
            if (q.options[q.selectedOption].correct) {
                userScore++;
                q.isCorrect = true;
                selectedOptEl.classList.remove('selected', 'border-teal-500');
                selectedOptEl.classList.add('correct');
                feedbackEl.innerHTML = `<p class="font-semibold">${q.feedback || '¬°Correcto!'}</p>`;
                feedbackEl.className = 'mt-4 p-3 rounded-lg text-sm bg-green-100 text-green-700';
            } else {
                q.isCorrect = false;
                selectedOptEl.classList.remove('selected', 'border-teal-500');
                selectedOptEl.classList.add('incorrect');
                q.options.forEach((opt, index) => {
                    if (opt.correct) {
                        document.querySelector(`.quiz-option[data-option-index="${index}"]`).classList.add('correct');
                    }
                });
                feedbackEl.innerHTML = `<p class="font-semibold">Incorrecto. ${q.feedback || ''}</p>`;
                feedbackEl.className = 'mt-4 p-3 rounded-lg text-sm bg-red-100 text-red-700';
            }

            document.getElementById('check-answer-btn').style.display = 'none';
            document.getElementById('next-question-btn').style.display = 'inline-block';
            document.querySelectorAll('.quiz-option').forEach(optDiv => {
                optDiv.style.pointerEvents = 'none'; 
            });
        }

        function displayQuizResults() {
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = `
                <h3 class="text-2xl font-bold text-slate-800 mb-4">Resultados del Cuestionario</h3>
                <p class="text-lg text-slate-700 mb-2">Has acertado ${userScore} de ${quizQuestions.length} preguntas.</p>
                <p class="text-2xl font-bold mb-6 ${userScore / quizQuestions.length >= 0.7 ? 'text-green-600' : 'text-red-600'}">
                    Puntuaci√≥n: ${((userScore / quizQuestions.length) * 100).toFixed(0)}%
                </p>
                <div class="mb-6">
                    ${quizQuestions.map((q, i) => `
                        <div class="p-3 mb-2 border rounded-md ${q.isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}">
                            <p class="font-semibold text-slate-700">P${i+1}: ${q.text}</p>
                            <p class="text-sm ${q.isCorrect ? 'text-green-700' : 'text-red-700'}">
                                Tu respuesta: ${q.options[q.selectedOption]?.text || 'No respondida'} - ${q.isCorrect ? 'Correcta' : 'Incorrecta'}.
                            </p>
                        </div>
                    `).join('')}
                </div>
                <button id="restart-quiz-btn" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-6 rounded-lg w-full sm:w-auto">Intentar de Nuevo</button>
            `;
            document.getElementById('restart-quiz-btn').addEventListener('click', startQuiz);
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderNav();
            renderContent('inicio'); 
        });
    </script>
</body>
</html>
